FROM eclipse-temurin:21-jre-alpine

WORKDIR /app

# Use the executable JAR
COPY target/restful-booker-platform-message-*-exec.jar ./message.jar

ENV authDomain=rbp-auth
ENV profile=dev

ENV JAVA_OPTS="-Xms128m -Xmx384m -XX:MaxMetaspaceSize=96m -XX:+UseContainerSupport"

ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS -jar -Dspring.profiles.active=$profile -Dhoneycomb.beeline.write-key=${HONEYCOMB_API_KEY} ./message.jar"]
